<!DOCTYPE html>
<html>
  <head>
    <link href="style/main.css" rel="stylesheet" type="text/css">

    <script src="javascript/jquery-1.10.0.min.js"></script>
    <script src="javascript/date.js"></script>

    <script src="javascript/locations_data.js"></script>
    <script src="javascript/location_data_html.js"></script>

    <script src="javascript/traffic_data.js"></script>
    <script src="javascript/traffic_data_html.js"></script>

    <title>TrafficRadar</title>
  </head>
  <body>
    <h1>TrafficRadar</h1>
    <p>
    Every colored cell has the velocity on the left and the travel time on the right.
    The color represents how busy traffic is at a certain moment.
    </p>

    <table id="locations_table">
      <thead>
        <tr id="row_header">
          <th>Id</th>
          <th>Name</th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>

    <script>
      $(document).ready(function() {
        var retrieveLocations = new RetrieveLocationData();
        retrieveLocations.retrieveAllLocations(afterRetrieveLocationsCallback);
      });

      function afterRetrieveLocationsCallback(results) {
        var locationsHTML = new LocationDataHTML();
        locationsHTML.createRows(results);

        var ids = getIds(results);
        var retrieveTraffic = new RetrieveTrafficData();
        retrieveTraffic.retrieveTrafficData(ids, afterRetrieveTrafficDataCallback);
      };

      function afterRetrieveTrafficDataCallback(results) {
        var trafficHTML = new TrafficDataHTML();
        trafficHTML.process(results);
      }
    </script>
  </body>
</html>
